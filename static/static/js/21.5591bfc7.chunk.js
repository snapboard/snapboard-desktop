(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{1149:function(e,t,n){var r,o;!function(a){if(void 0===(o="function"===typeof(r=a)?r.call(t,n,t,e):r)||(e.exports=o),!0,e.exports=a(),!!0){var c=window.Cookies,i=window.Cookies=a();i.noConflict=function(){return window.Cookies=c,i}}}(function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var r in n)t[r]=n[r]}return t}return function t(n){function r(t,o,a){var c;if("undefined"!==typeof document){if(arguments.length>1){if("number"===typeof(a=e({path:"/"},r.defaults,a)).expires){var i=new Date;i.setMilliseconds(i.getMilliseconds()+864e5*a.expires),a.expires=i}a.expires=a.expires?a.expires.toUTCString():"";try{c=JSON.stringify(o),/^[\{\[]/.test(c)&&(o=c)}catch(b){}o=n.write?n.write(o,t):encodeURIComponent(String(o)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=(t=(t=encodeURIComponent(String(t))).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent)).replace(/[\(\)]/g,escape);var u="";for(var s in a)a[s]&&(u+="; "+s,!0!==a[s]&&(u+="="+a[s]));return document.cookie=t+"="+o+u}t||(c={});for(var l=document.cookie?document.cookie.split("; "):[],f=/(%[0-9A-Z]{2})+/g,d=0;d<l.length;d++){var p=l[d].split("="),h=p.slice(1).join("=");this.json||'"'!==h.charAt(0)||(h=h.slice(1,-1));try{var v=p[0].replace(f,decodeURIComponent);if(h=n.read?n.read(h,v):n(h,v)||h.replace(f,decodeURIComponent),this.json)try{h=JSON.parse(h)}catch(b){}if(t===v){c=h;break}t||(c[v]=h)}catch(b){}}return c}}return r.set=r,r.get=function(e){return r.call(r,e)},r.getJSON=function(){return r.apply({json:!0},[].slice.call(arguments))},r.defaults={},r.remove=function(t,n){r(t,"",e(n,{expires:-1}))},r.withConverter=t,r}(function(){})})},116:function(e,t,n){"use strict";var r=n(21),o=n(0),a=n(176);t.a=function(e){var t=Object(o.useState)(null),n=Object(r.a)(t,2),c=n[0],i=n[1],u=Object(a.a)(e);return Object(o.useEffect)(function(){if(u)return e.onSnapshot(function(e){i(e)})},[u]),c}},118:function(e,t,n){"use strict";var r=n(23),o=n(24),a=n(26),c=n(25),i=n(27),u=n(1),s=n(0),l=n.n(s),f=n(188),d=n.n(f),p=n(181),h=n.n(p),v=n(258),b=n.n(v),y=n(259),m=n.n(y),j=n(161),x=n.n(j),g=n(260),O=n.n(g),w=function(){function e(t,n,o){Object(r.a)(this,e),this.value=t,this.counter=0,this.listeners=[],this.onChange=n,this.readOnly=o.readOnly||!1,this.setValue.bind(this),this.getValue.bind(this)}return Object(o.a)(e,[{key:"getValue",value:function(e){return e?h()(this.value,e):this.value}},{key:"setValue",value:function(e,t){var n=this;return this.readOnly?this:(void 0===this.value&&(this.value={}),b()(this.value,e,d()(t)?t(this.getValue(e)):t),this.onChange&&this.onChange(this.value,e,this),this.listeners.forEach(function(t){var r=t.field,o=t.cb,a=m()(e),c=m()(r);("*"===r||x()(a.slice(0,c.length),c))&&o(n.getValue(r),e,n)}),this)}},{key:"watch",value:function(e,t){var n=this,r=this.counter++;return this.listeners.push({id:r,cb:t,field:e}),function(){return O()(n.listeners,function(e){return e.id===r})}}}]),e}(),C=l.a.createContext(null),k=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(a.a)(this,Object(c.a)(t).call(this,e))).controller=new w(e.initialValue,function(e){n.props.onChange&&n.props.onChange(e,n.controller),d()(n.props.children)&&n.forceUpdate()},{readOnly:e.readOnly}),n}return Object(i.a)(t,e),Object(o.a)(t,[{key:"componentDidUpdate",value:function(){this.controller.readOnly=this.props.readOnly}},{key:"render",value:function(){var e=this.props.children;return Object(u.jsx)(C.Provider,{value:this.controller},d()(e)?e(this.controller,this.controller.value):e)}}]),t}(l.a.Component),I=n(21);function U(e){return Object(s.useContext)(C)}function A(e){var t=Object(s.useContext)(C),n=Object(s.useState)(t.getValue(e)),r=Object(I.a)(n,2),o=r[0],a=r[1];return Object(s.useEffect)(function(){return t.watch(e,function(e){a(e)})},[t,e]),[o,function(n){return t.setValue(e,n)},t]}var R=n(44),S=n(107);var E=function(e){var t=e.children,n=e.onSubmit,r=e.onChange,o=e.initialValue,a=e.readOnly,c=Object(S.a)(e,["children","onSubmit","onChange","initialValue","readOnly"]),i=Object(s.useRef)(null);return Object(u.jsx)(k,{ref:i,onChange:r,initialValue:o,readOnly:a},Object(u.jsx)("form",Object(R.a)({onSubmit:function(e){e.preventDefault();var t=i.current&&i.current.controller;n&&n(e,t)}},c),t))};n.d(t,"c",function(){return U}),n.d(t,"d",function(){return A}),n.d(t,"a",function(){return E});t.b=k},1326:function(e,t,n){"use strict";n.r(t);var r=n(11),o=n.n(r),a=n(17),c=n(1),i=(n(0),n(37)),u=n.n(i),s=n(574),l=n.n(s),f=n(69),d=n(116),p=n(1149),h=n.n(p),v="https://oauth.snapboard.io",b=".snapboard.io",y="https://snapboard.io";function m(e){return j.apply(this,arguments)}function j(){return(j=Object(a.a)(o.a.mark(function e(t){var n,r,a,c,i=arguments;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>1&&void 0!==i[1]?i[1]:{},r=n.meta||{},!u()()){e.next=6;break}e.t0=l.a.parse(window.location.search).token,e.next=9;break;case 6:return e.next=8,f.a.auth().currentUser.getIdToken(!1);case 8:e.t0=e.sent;case 9:a=e.t0,r.oauthRedirect=n.redirect?"".concat(y).concat(n.redirect):"".concat(y,"/oauth"),h.a.set("meta",JSON.stringify(r),{domain:b}),h.a.set("token",a,{domain:b}),c="".concat(v,"/").concat(t),n.query&&(c="".concat(c,"?").concat(l.a.stringify(n.query))),window.location.href=c;case 16:case"end":return e.stop()}},e)}))).apply(this,arguments)}var x=n(44),g=n(211),O=n.n(g),w=n(136),C=n.n(w),k=n(134),I=n(171);var U={container:{name:"1vuv58z",styles:"min-height:100%;background:#fafafa;"},content:{name:"1wx3ta0",styles:"padding:3em 1em;margin:0 auto;max-width:30em;"}},A=function(e){var t=e.children;return Object(c.jsx)("div",{css:U.container},Object(c.jsx)("div",{css:U.content},t))},R=n(478),S=n.n(R),E=n(118),F={link:function(e){return Object(c.jsx)("a",Object(x.a)({},e,{rel:"noopener noreferrer",target:"_blank"}))}},N={type:"basic",primary:"username",fields:{username:{label:"Username",type:"text",required:!0,prop:"username",placeholder:"Username"},password:{label:"Password",type:"password",required:!0,prop:"password",placeholder:"Password"}}},q={text:I.a,password:function(e){return Object(c.jsx)(I.a,Object(x.a)({type:"password"},e))}},V={name:"1v8nkjm",styles:"margin-top:2em;"},D={name:"1q70b",styles:"display:block;font-size:1.2em;color:#888;font-weight:normal;margin:0.3em 0;"},z={name:"xi606m",styles:"text-align:center;"},J={name:"1bwj17t",styles:"margin-top:3em;"},T={name:"x8h6hl",styles:"margin-left:0.5em;"};var B={title:{name:"1ou5e5s",styles:"text-align:center;margin-bottom:1em;font-size:2em;line-height:1.4;font-weight:600;"},icon:{name:"ue71z1",styles:"width:76px;margin-bottom:1em;"}},$=function(e){var t=e.provider,n=e.onDone,r=e.onCancel,o=t.name,a=t.auth,i=t.icon,u="basic"===a.type?N:a,s=u.fields,l=u.primary,f=O()(s,function(e,t){var n=e.label,r=e.type,o=void 0===r?"text":r,a=e.required,i=e.placeholder,u=e.desc,s=q[o]||I.a;return Object(c.jsx)("div",{key:t,css:V},Object(c.jsx)(k.FormField,{label:n,caption:Object(c.jsx)("span",{css:D},Object(c.jsx)(S.a,{source:u,renderers:F})),required:a},Object(c.jsx)(s,{placeholder:i||n,required:a,field:t})))});return Object(c.jsx)(A,null,Object(c.jsx)(E.a,{onSubmit:function(e,t){var r=l&&t.value[l]||"".concat(Date.now());n&&n(r,t.value)}},Object(c.jsx)("div",{css:z},i&&Object(c.jsx)("img",{css:B.icon,alt:o,src:i.url})),Object(c.jsx)("h1",{css:B.title},"Allow Snapboard to access your ",o," account?"),f,Object(c.jsx)("div",{css:J},Object(c.jsx)(C.a,{type:"submit",primary:!0},"Allow Access"),Object(c.jsx)(C.a,{type:"button",onClick:r,minimal:!0,css:T},"Cancel"))))},_=f.a.firestore();t.default=function(e){var t=e.match.params.providerId,n=_.collection("providers").doc(t),r=Object(d.a)(n);if(null===r)return"Loading...";var i=r.data(),s=(i||{}).auth;if("oauth"===s.type&&!s.fields)return m(t),null;var p=function(){var e=Object(a.a)(o.a.mark(function e(n,r){var a,c,i;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("oauth"!==s.type){e.next=3;break}return m(t,{meta:r}),e.abrupt("return",null);case 3:if(!u()()){e.next=7;break}e.t0=l.a.parse(window.location.search).userId,e.next=10;break;case 7:return e.next=9,f.a.auth().currentUser.uid;case 9:e.t0=e.sent;case 10:return a=e.t0,c=f.a.auth().currentUser,i="".concat(t,"-").concat(n,"-").concat(a),e.next=15,_.collection("accounts").doc(i).set({providerId:t,userId:c.uid,externalId:n,type:s.type});case 15:return e.next=17,_.collection("accounts").doc(i).collection("private").doc("tokens").set({providerId:t,externalId:n,type:s.type,data:r});case 17:window.opener&&window.close();case 18:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}();return Object(c.jsx)($,{provider:i,onDone:p,onCancel:function(){window.opener&&window.close()}})}},171:function(e,t,n){"use strict";var r=n(214),o=n.n(r),a=n(244);t.a=Object(a.a)(o.a)},176:function(e,t,n){"use strict";function r(e){return e?e._query?e._query.memoizedCanonicalId||e._query.canonicalId():e.memoizedCanonicalId?e.memoizedCanonicalId:e.canonicalId?e.canonicalId():e.path:null}n.d(t,"a",function(){return r})},211:function(e,t,n){var r=n(155),o=n(187),a=n(303),c=n(111);e.exports=function(e,t){return(c(e)?r:a)(e,o(t,3))}},244:function(e,t,n){"use strict";var r=n(44),o=n(21),a=n(107),c=n(1),i=(n(0),n(118));t.a=function(e){return function(t){var n=t.field,u=t.onChange,s=t.forwardedRef,l=Object(a.a)(t,["field","onChange","forwardedRef"]),f=Object(i.d)(n),d=Object(o.a)(f,2),p=d[0],h=d[1];return Object(c.jsx)(e,Object(r.a)({},l,{forwardedRef:s,value:p||0===p?p:"",onChange:function(e){h(e.target.value),u&&u(e)}}))}}},252:function(e,t,n){var r=n(304),o=n(305)(r);e.exports=o},303:function(e,t,n){var r=n(252),o=n(148);e.exports=function(e,t){var n=-1,a=o(e)?Array(e.length):[];return r(e,function(e,r,o){a[++n]=t(e,r,o)}),a}},304:function(e,t,n){var r=n(451),o=n(157);e.exports=function(e,t){return e&&r(e,t,o)}},305:function(e,t,n){var r=n(148);e.exports=function(e,t){return function(n,o){if(null==n)return n;if(!r(n))return e(n,o);for(var a=n.length,c=t?a:-1,i=Object(n);(t?c--:++c<a)&&!1!==o(i[c],c,i););return n}}},574:function(e,t,n){"use strict";var r=n(671),o=n(675),a=n(679),c=n(680),i=n(681);function u(e,t){return t.encode?t.strict?a(e):encodeURIComponent(e):e}function s(e,t){return t.decode?c(e):e}function l(e){var t=e.indexOf("#");return-1!==t&&(e=e.slice(0,t)),e}function f(e){var t=(e=l(e)).indexOf("?");return-1===t?"":e.slice(t+1)}function d(e,t){var n=function(e){var t;switch(e.arrayFormat){case"index":return function(e,n,r){t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===r[e]&&(r[e]={}),r[e][t[1]]=n):r[e]=n};case"bracket":return function(e,n,r){t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==r[e]?r[e]=[].concat(r[e],n):r[e]=[n]:r[e]=n};case"comma":return function(e,t,n){var r="string"===typeof t&&t.split("").indexOf(",")>-1?t.split(","):t;n[e]=r};default:return function(e,t,n){void 0!==n[e]?n[e]=[].concat(n[e],t):n[e]=t}}}(t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",parseNumbers:!1},t)),o=Object.create(null);if("string"!==typeof e)return o;if(!(e=e.trim().replace(/^[?#&]/,"")))return o;var a=!0,c=!1,u=void 0;try{for(var l,f=e.split("&")[Symbol.iterator]();!(a=(l=f.next()).done);a=!0){var d=l.value,p=i(d.replace(/\+/g," "),"="),h=r(p,2),v=h[0],b=h[1];b=void 0===b?null:s(b,t),t.parseNumbers&&!Number.isNaN(Number(b))&&(b=Number(b)),n(s(v,t),b,o)}}catch(y){c=!0,u=y}finally{try{a||null==f.return||f.return()}finally{if(c)throw u}}return!1===t.sort?o:(!0===t.sort?Object.keys(o).sort():Object.keys(o).sort(t.sort)).reduce(function(e,t){var n=o[t];return Boolean(n)&&"object"===typeof n&&!Array.isArray(n)?e[t]=function e(t){return Array.isArray(t)?t.sort():"object"===typeof t?e(Object.keys(t)).sort(function(e,t){return Number(e)-Number(t)}).map(function(e){return t[e]}):t}(n):e[t]=n,e},Object.create(null))}t.extract=f,t.parse=d,t.stringify=function(e,t){if(!e)return"";var n=function(e){switch(e.arrayFormat){case"index":return function(t){return function(n,r){var a=n.length;return void 0===r?n:[].concat(o(n),null===r?[[u(t,e),"[",a,"]"].join("")]:[[u(t,e),"[",u(a,e),"]=",u(r,e)].join("")])}};case"bracket":return function(t){return function(n,r){return void 0===r?n:[].concat(o(n),null===r?[[u(t,e),"[]"].join("")]:[[u(t,e),"[]=",u(r,e)].join("")])}};case"comma":return function(t){return function(n,r,o){return null===r||void 0===r||0===r.length?n:0===o?[[u(t,e),"=",u(r,e)].join("")]:[[n,u(r,e)].join(",")]}};default:return function(t){return function(n,r){return void 0===r?n:[].concat(o(n),null===r?[u(t,e)]:[[u(t,e),"=",u(r,e)].join("")])}}}}(t=Object.assign({encode:!0,strict:!0,arrayFormat:"none"},t)),r=Object.keys(e);return!1!==t.sort&&r.sort(t.sort),r.map(function(r){var o=e[r];return void 0===o?"":null===o?u(r,t):Array.isArray(o)?o.reduce(n(r),[]).join("&"):u(r,t)+"="+u(o,t)}).filter(function(e){return e.length>0}).join("&")},t.parseUrl=function(e,t){return{url:l(e).split("?")[0]||"",query:d(f(e),t)}}},671:function(e,t,n){var r=n(672),o=n(673),a=n(674);e.exports=function(e,t){return r(e)||o(e,t)||a()}},672:function(e,t){e.exports=function(e){if(Array.isArray(e))return e}},673:function(e,t){e.exports=function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var c,i=e[Symbol.iterator]();!(r=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(u){o=!0,a=u}finally{try{r||null==i.return||i.return()}finally{if(o)throw a}}return n}},674:function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},675:function(e,t,n){var r=n(676),o=n(677),a=n(678);e.exports=function(e){return r(e)||o(e)||a()}},676:function(e,t){e.exports=function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}},677:function(e,t){e.exports=function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}},678:function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},679:function(e,t,n){"use strict";e.exports=function(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return"%".concat(e.charCodeAt(0).toString(16).toUpperCase())})}},680:function(e,t,n){"use strict";var r=new RegExp("%[a-f0-9]{2}","gi"),o=new RegExp("(%[a-f0-9]{2})+","gi");function a(e,t){try{return decodeURIComponent(e.join(""))}catch(o){}if(1===e.length)return e;t=t||1;var n=e.slice(0,t),r=e.slice(t);return Array.prototype.concat.call([],a(n),a(r))}function c(e){try{return decodeURIComponent(e)}catch(o){for(var t=e.match(r),n=1;n<t.length;n++)t=(e=a(t,n).join("")).match(r);return e}}e.exports=function(e){if("string"!==typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(t){return function(e){for(var n={"%FE%FF":"\ufffd\ufffd","%FF%FE":"\ufffd\ufffd"},r=o.exec(e);r;){try{n[r[0]]=decodeURIComponent(r[0])}catch(t){var a=c(r[0]);a!==r[0]&&(n[r[0]]=a)}r=o.exec(e)}n["%C2"]="\ufffd";for(var i=Object.keys(n),u=0;u<i.length;u++){var s=i[u];e=e.replace(new RegExp(s,"g"),n[s])}return e}(e)}}},681:function(e,t,n){"use strict";e.exports=function(e,t){if("string"!==typeof e||"string"!==typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];var n=e.indexOf(t);return-1===n?[e]:[e.slice(0,n),e.slice(n+t.length)]}}}]);
//# sourceMappingURL=21.5591bfc7.chunk.js.map